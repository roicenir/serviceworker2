{"id":"node_modules/torrent-piece/index.js","dependencies":[{"name":"/workspace/serviceworker2/package.json","includedInParent":true,"mtime":1581951768329},{"name":"/workspace/serviceworker2/node_modules/torrent-piece/package.json","includedInParent":true,"mtime":1581951768311},{"name":"buffer","parent":"/workspace/serviceworker2/node_modules/torrent-piece/index.js","resolved":"/workspace/serviceworker2/node_modules/buffer/index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nconst BLOCK_LENGTH = 1 << 14\n\nclass Piece {\n  constructor (length) {\n    this.length = length\n    this.missing = length\n    this.sources = null\n\n    this._chunks = Math.ceil(length / BLOCK_LENGTH)\n    this._remainder = (length % BLOCK_LENGTH) || BLOCK_LENGTH\n    this._buffered = 0\n    this._buffer = null\n    this._cancellations = null\n    this._reservations = 0\n    this._flushed = false\n  }\n\n  chunkLength (i) {\n    return i === this._chunks - 1 ? this._remainder : BLOCK_LENGTH\n  }\n\n  chunkLengthRemaining (i) {\n    return this.length - (i * BLOCK_LENGTH)\n  }\n\n  chunkOffset (i) {\n    return i * BLOCK_LENGTH\n  }\n\n  reserve () {\n    if (!this.init()) return -1\n    if (this._cancellations.length) return this._cancellations.pop()\n    if (this._reservations < this._chunks) return this._reservations++\n    return -1\n  }\n\n  reserveRemaining () {\n    if (!this.init()) return -1\n    if (this._reservations < this._chunks) {\n      const min = this._reservations\n      this._reservations = this._chunks\n      return min\n    }\n    return -1\n  }\n\n  cancel (i) {\n    if (!this.init()) return\n    this._cancellations.push(i)\n  }\n\n  cancelRemaining (i) {\n    if (!this.init()) return\n    this._reservations = i\n  }\n\n  get (i) {\n    if (!this.init()) return null\n    return this._buffer[i]\n  }\n\n  set (i, data, source) {\n    if (!this.init()) return false\n    const len = data.length\n    const blocks = Math.ceil(len / BLOCK_LENGTH)\n    for (let j = 0; j < blocks; j++) {\n      if (!this._buffer[i + j]) {\n        const offset = j * BLOCK_LENGTH\n        const splitData = data.slice(offset, offset + BLOCK_LENGTH)\n        this._buffered++\n        this._buffer[i + j] = splitData\n        this.missing -= splitData.length\n        if (!this.sources.includes(source)) {\n          this.sources.push(source)\n        }\n      }\n    }\n    return this._buffered === this._chunks\n  }\n\n  flush () {\n    if (!this._buffer || this._chunks !== this._buffered) return null\n    const buffer = Buffer.concat(this._buffer, this.length)\n    this._buffer = null\n    this._cancellations = null\n    this.sources = null\n    this._flushed = true\n    return buffer\n  }\n\n  init () {\n    if (this._flushed) return false\n    if (this._buffer) return true\n    this._buffer = new Array(this._chunks)\n    this._cancellations = []\n    this.sources = []\n    return true\n  }\n}\n\nObject.defineProperty(Piece, 'BLOCK_LENGTH', { value: BLOCK_LENGTH })\n\nmodule.exports = Piece\n"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/torrent-piece/index.js","original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":2,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":3,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":4,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":5,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":6,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":7,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":8,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":9,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":10,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":11,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":12,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":13,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":14,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":15,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":16,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":17,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":18,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":19,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":20,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":21,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":22,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":23,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":24,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":25,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":26,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":27,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":28,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":29,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":30,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":31,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":32,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":33,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":34,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":35,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":36,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":37,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":38,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":39,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":40,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":41,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":42,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":43,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":44,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":45,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":46,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":47,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":48,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":49,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":50,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":51,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":52,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":53,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":54,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":55,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":56,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":57,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":58,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":59,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":60,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":61,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":62,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":63,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":64,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":65,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":66,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":67,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":68,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":69,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":70,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":71,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":72,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":73,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":74,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":75,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":76,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":77,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":78,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":79,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":80,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":81,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":82,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":83,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":84,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":85,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":86,"column":0},"generated":{"line":87,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":87,"column":0},"generated":{"line":88,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":88,"column":0},"generated":{"line":89,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":89,"column":0},"generated":{"line":90,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":90,"column":0},"generated":{"line":91,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":91,"column":0},"generated":{"line":92,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":92,"column":0},"generated":{"line":93,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":93,"column":0},"generated":{"line":94,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":94,"column":0},"generated":{"line":95,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":95,"column":0},"generated":{"line":96,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":96,"column":0},"generated":{"line":97,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":97,"column":0},"generated":{"line":98,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":98,"column":0},"generated":{"line":99,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":99,"column":0},"generated":{"line":100,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":100,"column":0},"generated":{"line":101,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":101,"column":0},"generated":{"line":102,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":102,"column":0},"generated":{"line":103,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":103,"column":0},"generated":{"line":104,"column":0}},{"source":"node_modules/torrent-piece/index.js","original":{"line":104,"column":0},"generated":{"line":105,"column":0}}],"sources":{"node_modules/torrent-piece/index.js":"const BLOCK_LENGTH = 1 << 14\n\nclass Piece {\n  constructor (length) {\n    this.length = length\n    this.missing = length\n    this.sources = null\n\n    this._chunks = Math.ceil(length / BLOCK_LENGTH)\n    this._remainder = (length % BLOCK_LENGTH) || BLOCK_LENGTH\n    this._buffered = 0\n    this._buffer = null\n    this._cancellations = null\n    this._reservations = 0\n    this._flushed = false\n  }\n\n  chunkLength (i) {\n    return i === this._chunks - 1 ? this._remainder : BLOCK_LENGTH\n  }\n\n  chunkLengthRemaining (i) {\n    return this.length - (i * BLOCK_LENGTH)\n  }\n\n  chunkOffset (i) {\n    return i * BLOCK_LENGTH\n  }\n\n  reserve () {\n    if (!this.init()) return -1\n    if (this._cancellations.length) return this._cancellations.pop()\n    if (this._reservations < this._chunks) return this._reservations++\n    return -1\n  }\n\n  reserveRemaining () {\n    if (!this.init()) return -1\n    if (this._reservations < this._chunks) {\n      const min = this._reservations\n      this._reservations = this._chunks\n      return min\n    }\n    return -1\n  }\n\n  cancel (i) {\n    if (!this.init()) return\n    this._cancellations.push(i)\n  }\n\n  cancelRemaining (i) {\n    if (!this.init()) return\n    this._reservations = i\n  }\n\n  get (i) {\n    if (!this.init()) return null\n    return this._buffer[i]\n  }\n\n  set (i, data, source) {\n    if (!this.init()) return false\n    const len = data.length\n    const blocks = Math.ceil(len / BLOCK_LENGTH)\n    for (let j = 0; j < blocks; j++) {\n      if (!this._buffer[i + j]) {\n        const offset = j * BLOCK_LENGTH\n        const splitData = data.slice(offset, offset + BLOCK_LENGTH)\n        this._buffered++\n        this._buffer[i + j] = splitData\n        this.missing -= splitData.length\n        if (!this.sources.includes(source)) {\n          this.sources.push(source)\n        }\n      }\n    }\n    return this._buffered === this._chunks\n  }\n\n  flush () {\n    if (!this._buffer || this._chunks !== this._buffered) return null\n    const buffer = Buffer.concat(this._buffer, this.length)\n    this._buffer = null\n    this._cancellations = null\n    this.sources = null\n    this._flushed = true\n    return buffer\n  }\n\n  init () {\n    if (this._flushed) return false\n    if (this._buffer) return true\n    this._buffer = new Array(this._chunks)\n    this._cancellations = []\n    this.sources = []\n    return true\n  }\n}\n\nObject.defineProperty(Piece, 'BLOCK_LENGTH', { value: BLOCK_LENGTH })\n\nmodule.exports = Piece\n"},"lineCount":105}},"error":null,"hash":"256a78d656256f7ceecfc07ffca35d0b","cacheData":{"env":{}}}